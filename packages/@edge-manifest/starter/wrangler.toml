# Edge Manifest Worker Configuration
name = "edge-manifest-worker"
main = "src/index.ts"
compatibility_date = "2025-12-13"
upload_source_maps = true
minify = false
send_metrics = false

# Wrangler should read migrations from the repo-level .output directory
migrations_dir = "../../.output/migrations"

[placement]
mode = "smart"

[dev]
port = 8787
ip = "127.0.0.1"
local_protocol = "http"

[[d1_databases]]
binding = "DB"
database_name = "edge-manifest-db"
database_id = "00000000-0000-0000-0000-000000000000"

[[kv_namespaces]]
binding = "KV"
id = "00000000000000000000000000000000"
preview_id = "00000000000000000000000000000000"

# Static assets directory (for /admin UI)
# Note: Admin UI is currently served inline via adminAssets, but this is ready for future use
# [assets]
# directory = "public"

[vars]
JWT_SECRET = "dev-secret-change-me"
KV_SESSION_TTL = "604800"
